<?php
$karakeep_url = FreshRSS_Context::$user_conf->karakeep_url ?? '';
$karakeep_api_token = FreshRSS_Context::$user_conf->karakeep_api_token ?? '';
?>

<form action="<?php echo _url('extension', 'configure', 'e', urlencode($this->getName())); ?>" method="post">
    <input type="hidden" name="_csrf" value="<?php echo FreshRSS_Auth::csrfToken(); ?>" />
    
    <h3>Karakeep Configuration</h3>
    
    <div class="form-group">
        <label for="karakeep_url">Karakeep URL:</label>
        <input type="text" name="karakeep_url" id="karakeep_url" value="<?php echo htmlspecialchars($karakeep_url); ?>" placeholder="https://your-karakeep-instance.com" style="width: 100%; max-width: 400px;">
        <small>Enter your Karakeep instance URL (e.g., https://try.karakeep.app or your self-hosted instance)</small>
    </div>
    
    <div class="form-group">
        <label for="karakeep_api_token">Karakeep API Token:</label>
        <input type="password" name="karakeep_api_token" id="karakeep_api_token" value="<?php echo htmlspecialchars($karakeep_api_token); ?>" placeholder="Enter your Karakeep API token" style="width: 100%; max-width: 400px;">
        <small>Generate an API token from your Karakeep account settings</small>
    </div>
    
    <hr />
    <button type="submit" class="btn btn-important">Save Configuration</button>
</form>

<style>
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}

.form-group small {
    display: block;
    color: #666;
    margin-top: 5px;
    font-style: italic;
}

.form-group input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.btn-important {
    background: #4285f4;
    color: white;
}

.btn-important:hover {
    background: #3367d6;
}

/* Dark mode support for configuration form */
@media (prefers-color-scheme: dark) {
    .form-group small {
        color: #a0aec0;
    }
    
    .form-group input {
        background: #2d3748;
        border: 1px solid #4a5568;
        color: #e2e8f0;
    }
    
    .form-group input:focus {
        border-color: #4285f4;
        outline: none;
        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
    }
}
</style>
